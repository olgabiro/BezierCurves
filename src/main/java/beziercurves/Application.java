package beziercurves;

import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;
import javax.swing.JOptionPane;

public class Application extends javax.swing.JFrame {
    
    BezierCurves curve;
	int methodChosen;
	int pointPosition;

    /**
     * Creates new form Application
     */
    public Application() {
        curve = new BezierCurves();
		methodChosen = 1;
		pointPosition = 0;
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        colorChooserDialog = new javax.swing.JDialog();
        colorChooserButton = new javax.swing.JButton();
        jPanel4 = new javax.swing.JPanel();
        colorChooser = new javax.swing.JColorChooser();
        aboutDialog = new javax.swing.JDialog();
        closeAboutDialog = new javax.swing.JButton();
        aboutText = new javax.swing.JLabel();
        instructionDialog = new javax.swing.JDialog();
        closeInstrDialog = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        methods = new javax.swing.ButtonGroup();
        lowerPrompt = new javax.swing.JDialog();
        deelevate = new javax.swing.JRadioButton();
        approx = new javax.swing.JRadioButton();
        hermite = new javax.swing.JRadioButton();
        jLabel2 = new javax.swing.JLabel();
        helloPrompt = new javax.swing.JDialog();
        jLabel3 = new javax.swing.JLabel();
        notShow = new javax.swing.JCheckBox();
        jButton2 = new javax.swing.JButton();
        changeWeightDialog = new javax.swing.JDialog();
        jPanel3 = new javax.swing.JPanel();
        xCoordinate = new javax.swing.JTextField();
        yCoordinate = new javax.swing.JTextField();
        weight = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        saveWeight = new javax.swing.JButton();
        jPanel1 = new javax.swing.JPanel();
        jToolBar1 = new javax.swing.JToolBar();
        jPanel2 = new javax.swing.JPanel();
        colorButton = new javax.swing.JButton();
        lowerDegree = new javax.swing.JButton();
        higherDegree = new javax.swing.JButton();
        convexHull = new javax.swing.JCheckBox();
        clear = new javax.swing.JButton();
        methodChange = new javax.swing.JButton();
        edition = new javax.swing.JCheckBox();
        menuBar = new javax.swing.JMenuBar();
        Menu = new javax.swing.JMenu();
        Quit = new javax.swing.JMenuItem();
        Help = new javax.swing.JMenu();
        Instruction = new javax.swing.JMenuItem();
        About = new javax.swing.JMenuItem();

        colorChooserDialog.setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        colorChooserDialog.setTitle("Color Chooser");
        colorChooserDialog.setBounds(new java.awt.Rectangle(375, 225, 50, 50));
        colorChooserDialog.setMinimumSize(new java.awt.Dimension(491, 300));

        colorChooserButton.setBackground(new java.awt.Color(170, 154, 180));
        colorChooserButton.setText("Zapisz");
        colorChooserButton.setToolTipText("Wybierz ten kolor");
        colorChooserButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                colorChooserButtonActionPerformed(evt);
            }
        });

        colorChooser.setBackground(new java.awt.Color(187, 164, 186));
        colorChooser.setMinimumSize(new java.awt.Dimension(450, 250));
        colorChooser.setPreferredSize(new java.awt.Dimension(450, 250));

        javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
        jPanel4.setLayout(jPanel4Layout);
        jPanel4Layout.setHorizontalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(colorChooser, javax.swing.GroupLayout.DEFAULT_SIZE, 478, Short.MAX_VALUE)
                .addContainerGap())
        );
        jPanel4Layout.setVerticalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(colorChooser, javax.swing.GroupLayout.DEFAULT_SIZE, 276, Short.MAX_VALUE)
                .addContainerGap())
        );

        javax.swing.GroupLayout colorChooserDialogLayout = new javax.swing.GroupLayout(colorChooserDialog.getContentPane());
        colorChooserDialog.getContentPane().setLayout(colorChooserDialogLayout);
        colorChooserDialogLayout.setHorizontalGroup(
            colorChooserDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, colorChooserDialogLayout.createSequentialGroup()
                .addContainerGap(435, Short.MAX_VALUE)
                .addComponent(colorChooserButton)
                .addGap(15, 15, 15))
            .addGroup(colorChooserDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jPanel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        colorChooserDialogLayout.setVerticalGroup(
            colorChooserDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, colorChooserDialogLayout.createSequentialGroup()
                .addContainerGap(238, Short.MAX_VALUE)
                .addComponent(colorChooserButton)
                .addGap(35, 35, 35))
            .addGroup(colorChooserDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jPanel4, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        aboutDialog.setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        aboutDialog.setTitle("O autorze");
        aboutDialog.setAlwaysOnTop(true);
        aboutDialog.setBounds(new java.awt.Rectangle(500, 250, 261, 193));
        aboutDialog.setMinimumSize(new java.awt.Dimension(261, 193));

        closeAboutDialog.setBackground(new java.awt.Color(170, 154, 180));
        closeAboutDialog.setText("Zamknij");
        closeAboutDialog.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                closeAboutDialogActionPerformed(evt);
            }
        });

        aboutText.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        aboutText.setText("<html>  <p align=\"center\">\nAutor: Olga Rosik-Rosińska\nnr indeksu 248058\nInstytut Informatyki\nUniwersytet Wrocławski\nrok akademicki 2012/13\n</p>\n</html>");
        aboutText.setToolTipText("");

        javax.swing.GroupLayout aboutDialogLayout = new javax.swing.GroupLayout(aboutDialog.getContentPane());
        aboutDialog.getContentPane().setLayout(aboutDialogLayout);
        aboutDialogLayout.setHorizontalGroup(
            aboutDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, aboutDialogLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(aboutText, javax.swing.GroupLayout.DEFAULT_SIZE, 237, Short.MAX_VALUE)
                .addContainerGap())
            .addGroup(aboutDialogLayout.createSequentialGroup()
                .addGap(99, 99, 99)
                .addComponent(closeAboutDialog)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        aboutDialogLayout.setVerticalGroup(
            aboutDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, aboutDialogLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(aboutText, javax.swing.GroupLayout.PREFERRED_SIZE, 112, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(closeAboutDialog)
                .addContainerGap())
        );

        instructionDialog.setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        instructionDialog.setTitle("Instrukcje");
        instructionDialog.setAlwaysOnTop(true);
        instructionDialog.setBounds(new java.awt.Rectangle(500, 250, 297, 300));
        instructionDialog.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));

        closeInstrDialog.setBackground(new java.awt.Color(170, 154, 180));
        closeInstrDialog.setText("Zamknij");
        closeInstrDialog.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                closeInstrDialogActionPerformed(evt);
            }
        });

        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel1.setText("<html>\n<h2 align=\"center\"> Edytor krzywych Beziera </h2>\n\n<p align=\"center\"> Rozpocznij przygodę z krzywymi Beziera!\nKlikając na edytor, stworzysz punkty kontrolne.\nMenu z boku pomoże ci edytować krzywą:\nzwiększać oraz zmniejszać jej stopień,\nrysować otoczkę wypukłą dla punktów oraz edytować rozmieszczenie\ni wagę węzłów. </p>\n<br>\n<p align=\"center\">\nPrzyłącz się już dziś!\n</p> </html>");

        javax.swing.GroupLayout instructionDialogLayout = new javax.swing.GroupLayout(instructionDialog.getContentPane());
        instructionDialog.getContentPane().setLayout(instructionDialogLayout);
        instructionDialogLayout.setHorizontalGroup(
            instructionDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(instructionDialogLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 231, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(10, 10, 10))
            .addGroup(instructionDialogLayout.createSequentialGroup()
                .addGap(95, 95, 95)
                .addComponent(closeInstrDialog)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        instructionDialogLayout.setVerticalGroup(
            instructionDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, instructionDialogLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1, javax.swing.GroupLayout.DEFAULT_SIZE, 234, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(closeInstrDialog)
                .addContainerGap())
        );

        lowerPrompt.setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        lowerPrompt.setAlwaysOnTop(true);
        lowerPrompt.setBounds(new java.awt.Rectangle(450, 275, 350, 200));
        lowerPrompt.setResizable(false);

        deelevate.setBackground(new java.awt.Color(170, 154, 180));
        methods.add(deelevate);
        deelevate.setSelected(true);
        deelevate.setText("odwrotność podwyższenia stopnia");
        deelevate.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                deelevateActionPerformed(evt);
            }
        });

        approx.setBackground(new java.awt.Color(170, 154, 180));
        methods.add(approx);
        approx.setText("wykorzystanie aproksymacji jednostajnej");
        approx.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                approxActionPerformed(evt);
            }
        });

        hermite.setBackground(new java.awt.Color(170, 154, 180));
        methods.add(hermite);
        hermite.setText("wykorzystanie interpolacji Hermite'a");
        hermite.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                hermiteActionPerformed(evt);
            }
        });

        jLabel2.setFont(new java.awt.Font("DejaVu Sans", 1, 14)); // NOI18N
        jLabel2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel2.setText("Wybierz ulubioną metodę");

        javax.swing.GroupLayout lowerPromptLayout = new javax.swing.GroupLayout(lowerPrompt.getContentPane());
        lowerPrompt.getContentPane().setLayout(lowerPromptLayout);
        lowerPromptLayout.setHorizontalGroup(
            lowerPromptLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(lowerPromptLayout.createSequentialGroup()
                .addGroup(lowerPromptLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(lowerPromptLayout.createSequentialGroup()
                        .addGap(10, 10, 10)
                        .addGroup(lowerPromptLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(approx)
                            .addComponent(deelevate)))
                    .addGroup(lowerPromptLayout.createSequentialGroup()
                        .addGap(30, 30, 30)
                        .addComponent(jLabel2))
                    .addGroup(lowerPromptLayout.createSequentialGroup()
                        .addGap(10, 10, 10)
                        .addComponent(hermite)))
                .addGap(60, 60, 60))
        );
        lowerPromptLayout.setVerticalGroup(
            lowerPromptLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(lowerPromptLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 27, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(deelevate)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(approx)
                .addGap(12, 12, 12)
                .addComponent(hermite)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        helloPrompt.setBounds(new java.awt.Rectangle(450, 250, 300, 275));

        jLabel3.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel3.setText("<html>\n<b> <p align=\"center\"> Witaj! </p></b> <br>\n<p align=\"center\">\nWłaśnie nacisnąłeś przycisk umożliwiający\nzmniejszenie stopnia krzywej Beziera.\n</p>\n<br>\n<p align=\"center\">\nDomyślnie wybrana metoda obniżania \nstopnia to wykorzystanie procesu odwrotnego do\npodnoszenia stopnia.\n</p>\n<br>\n<p align=\"center\">\nJeśli w przyszłości będziesz chciał zmienić metodę,\nnaciśnij przycisk \"Zmień metodę\".\n</p>\n</html>");

        notShow.setText("Nie pokazuj więcej tego okna");

        jButton2.setBackground(new java.awt.Color(170, 154, 180));
        jButton2.setText("OK");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout helloPromptLayout = new javax.swing.GroupLayout(helloPrompt.getContentPane());
        helloPrompt.getContentPane().setLayout(helloPromptLayout);
        helloPromptLayout.setHorizontalGroup(
            helloPromptLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(helloPromptLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(helloPromptLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 281, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(helloPromptLayout.createSequentialGroup()
                        .addComponent(notShow)
                        .addGap(18, 18, 18)
                        .addComponent(jButton2, javax.swing.GroupLayout.PREFERRED_SIZE, 56, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(23, Short.MAX_VALUE))
        );
        helloPromptLayout.setVerticalGroup(
            helloPromptLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(helloPromptLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 197, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(helloPromptLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(notShow)
                    .addComponent(jButton2))
                .addContainerGap(30, Short.MAX_VALUE))
        );

        changeWeightDialog.setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        changeWeightDialog.setTitle("Edycja punktu");
        changeWeightDialog.setBounds(new java.awt.Rectangle(500, 250, 216, 225));

        xCoordinate.setMinimumSize(new java.awt.Dimension(92, 25));

        yCoordinate.setMinimumSize(new java.awt.Dimension(92, 25));

        weight.setMinimumSize(new java.awt.Dimension(92, 25));
        weight.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                weightActionPerformed(evt);
            }
        });

        jLabel4.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel4.setText("współrzędna X");

        jLabel5.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel5.setText("współrzędna Y");

        jLabel6.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel6.setText("Waga");

        saveWeight.setBackground(new java.awt.Color(185, 173, 199));
        saveWeight.setText("Zapisz");
        saveWeight.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                saveWeightActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 96, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel6, javax.swing.GroupLayout.PREFERRED_SIZE, 96, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 96, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(xCoordinate, javax.swing.GroupLayout.DEFAULT_SIZE, 92, Short.MAX_VALUE)
                            .addComponent(yCoordinate, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(weight, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGap(78, 78, 78)
                        .addComponent(saveWeight)))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGap(17, 17, 17)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(xCoordinate, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(yCoordinate, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel5, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(18, 18, 18)
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(weight, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel6, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(0, 24, Short.MAX_VALUE)
                .addComponent(saveWeight)
                .addContainerGap())
        );

        javax.swing.GroupLayout changeWeightDialogLayout = new javax.swing.GroupLayout(changeWeightDialog.getContentPane());
        changeWeightDialog.getContentPane().setLayout(changeWeightDialogLayout);
        changeWeightDialogLayout.setHorizontalGroup(
            changeWeightDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, changeWeightDialogLayout.createSequentialGroup()
                .addGap(0, 0, 0)
                .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, 0))
        );
        changeWeightDialogLayout.setVerticalGroup(
            changeWeightDialogLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(changeWeightDialogLayout.createSequentialGroup()
                .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 22, Short.MAX_VALUE))
        );

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setBounds(new java.awt.Rectangle(400, 200, 420, 300));

        jPanel1.setBackground(new java.awt.Color(247, 241, 246));
        jPanel1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jPanel1MouseClicked(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 298, Short.MAX_VALUE)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 0, Short.MAX_VALUE)
        );

        jToolBar1.setBackground(new java.awt.Color(183, 81, 211));
        jToolBar1.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(70, 36, 104), 1, true));
        jToolBar1.setForeground(new java.awt.Color(131, 86, 140));
        jToolBar1.setOrientation(javax.swing.SwingConstants.VERTICAL);
        jToolBar1.setRollover(true);

        colorButton.setBackground(new java.awt.Color(170, 154, 180));
        colorButton.setText("Kolor");
        colorButton.setToolTipText("wybierz kolor krzywej");
        colorButton.setAlignmentX(0.5F);
        colorButton.setFocusable(false);
        colorButton.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        colorButton.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        colorButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                colorButtonActionPerformed(evt);
            }
        });

        lowerDegree.setBackground(new java.awt.Color(170, 154, 180));
        lowerDegree.setText("stopień -");
        lowerDegree.setToolTipText("zmniejsz stopień krzywej o 1");
        lowerDegree.setAlignmentX(0.5F);
        lowerDegree.setFocusable(false);
        lowerDegree.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        lowerDegree.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        lowerDegree.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                lowerDegreeActionPerformed(evt);
            }
        });

        higherDegree.setBackground(new java.awt.Color(170, 154, 180));
        higherDegree.setText("stopień +");
        higherDegree.setToolTipText("zwiększ stopień o 1");
        higherDegree.setFocusable(false);
        higherDegree.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        higherDegree.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        higherDegree.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                higherDegreeActionPerformed(evt);
            }
        });

        convexHull.setBackground(new java.awt.Color(185, 173, 199));
        convexHull.setText("otoczka");
        convexHull.setToolTipText("Pokaż otoczkę wypukłą");
        convexHull.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                convexHullActionPerformed(evt);
            }
        });

        clear.setBackground(new java.awt.Color(170, 154, 180));
        clear.setText("Wyczyść");
        clear.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                clearActionPerformed(evt);
            }
        });

        methodChange.setBackground(new java.awt.Color(170, 154, 180));
        methodChange.setText("<html> Zmiana <br> metody </html>");
        methodChange.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                methodChangeActionPerformed(evt);
            }
        });

        edition.setBackground(new java.awt.Color(185, 173, 199));
        edition.setText("edycja");

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(higherDegree, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(lowerDegree, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(colorButton, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(clear, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(methodChange)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addGap(2, 12, Short.MAX_VALUE)
                .addComponent(convexHull)
                .addGap(10, 10, 10))
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(edition, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addComponent(colorButton)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(lowerDegree)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(higherDegree)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(convexHull)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(clear)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(methodChange, javax.swing.GroupLayout.PREFERRED_SIZE, 43, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(edition)
                .addContainerGap(24, Short.MAX_VALUE))
        );

        jToolBar1.add(jPanel2);

        menuBar.setBackground(new java.awt.Color(144, 85, 206));

        Menu.setBackground(new java.awt.Color(185, 178, 189));
        Menu.setText("Menu");

        Quit.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_Q, java.awt.event.InputEvent.CTRL_MASK));
        Quit.setText("Zamknij");
        Quit.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                QuitActionPerformed(evt);
            }
        });
        Menu.add(Quit);

        menuBar.add(Menu);

        Help.setBackground(new java.awt.Color(185, 178, 189));
        Help.setText("Pomoc");

        Instruction.setText("Instrukcja obsługi");
        Instruction.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                InstructionActionPerformed(evt);
            }
        });
        Help.add(Instruction);

        About.setText("O autorze");
        About.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                AboutActionPerformed(evt);
            }
        });
        Help.add(About);

        menuBar.add(Help);

        setJMenuBar(menuBar);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGap(0, 0, 0)
                .addComponent(jToolBar1, javax.swing.GroupLayout.DEFAULT_SIZE, 107, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jToolBar1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void colorButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_colorButtonActionPerformed
        colorChooserDialog.setVisible(true);
    }//GEN-LAST:event_colorButtonActionPerformed

    private void higherDegreeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_higherDegreeActionPerformed
        Graphics g = jPanel1.getGraphics();
		if(convexHull.isSelected()){
			Tools.evalConvexHull(curve, g, false);
		}
		if(curve.degree > 0) {
            curve.elevateDegree(g);
        }
		if(convexHull.isSelected()){
			Tools.evalConvexHull(curve, g, true);
		}
    }//GEN-LAST:event_higherDegreeActionPerformed

    private void clearPoints(){
        Graphics g = jPanel1.getGraphics();
        g.setColor(jPanel1.getBackground());
        
        if(convexHull.isSelected()){
            Tools.evalConvexHull(curve, g, false);
        }
        curve.drawCurve(g);
        for (int i=0; i <curve.degree; i++){
            g.drawOval(curve.points[i].x, curve.points[i].y, 3, 3);
            curve.points[i] = null;
        }
        curve.degree = 0;
    }
	
	private void drawPoints() {
		Graphics g = jPanel1.getGraphics();
		g.setColor(curve.colour);
		
		for(int i=0; i<curve.degree; i++){
			g.drawOval(curve.points[i].x, curve.points[i].y, 3, 3);
		}
	}
	
    private void lowerDegreeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_lowerDegreeActionPerformed
		if(! notShow.isSelected()){
			helloPrompt.setVisible(true);
		}
		Graphics g = jPanel1.getGraphics();
		if(convexHull.isSelected()){
			Tools.evalConvexHull(curve, g, false);
		}
		curve.lowerDegree(g, methodChosen);
		if(convexHull.isSelected()){
			Tools.evalConvexHull(curve, g, true);
		}
    }//GEN-LAST:event_lowerDegreeActionPerformed

    private void AboutActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_AboutActionPerformed
        aboutDialog.setVisible(true);
    }//GEN-LAST:event_AboutActionPerformed

    private void QuitActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_QuitActionPerformed
        System.exit(0);
    }//GEN-LAST:event_QuitActionPerformed

    private void colorChooserButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_colorChooserButtonActionPerformed
        Color col = colorChooser.getColor();
        curve.colour = col;
        colorChooserDialog.dispose();
        Graphics g = jPanel1.getGraphics();
        g.setColor(col);
        drawPoints();
        curve.drawCurve(g);
        convexHullActionPerformed(evt);
    }//GEN-LAST:event_colorChooserButtonActionPerformed

    private void jPanel1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jPanel1MouseClicked
		if(edition.isSelected() && curve.degree > 0){
			pointPosition = Tools.findPoint(jPanel1.getMousePosition(), curve);
			if(pointPosition < curve.degree) {
				xCoordinate.setText(String.valueOf(curve.points[pointPosition].x));
				yCoordinate.setText(String.valueOf(curve.points[pointPosition].y));
				weight.setText(String.valueOf(curve.weight[pointPosition]));
				changeWeightDialog.setVisible(true);}
			return;
		}
		Graphics g = jPanel1.getGraphics();
        g.setColor(jPanel1.getBackground());
        curve.drawCurve(g);
        g.setColor(curve.colour);
        Point a = jPanel1.getMousePosition();
        g.drawOval(a.x, a.y, 3, 3);
        if(convexHull.isSelected()){
			Tools.evalConvexHull(curve, g, false);
		}
		drawPoints();
		g.setColor(curve.colour);
        int n = curve.degree;
        curve.points[n] = a;
        curve.weight[n] = 1;
        curve.degree ++;
        curve.drawCurve(g);
        if(convexHull.isSelected()) {
            Tools.evalConvexHull(curve, g, true);
        }
    }//GEN-LAST:event_jPanel1MouseClicked

    private void InstructionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_InstructionActionPerformed
        instructionDialog.setVisible(true);
    }//GEN-LAST:event_InstructionActionPerformed

    private void closeAboutDialogActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_closeAboutDialogActionPerformed
        aboutDialog.dispose();
    }//GEN-LAST:event_closeAboutDialogActionPerformed

    private void closeInstrDialogActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_closeInstrDialogActionPerformed
        instructionDialog.dispose();
    }//GEN-LAST:event_closeInstrDialogActionPerformed

    private void convexHullActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_convexHullActionPerformed
        Graphics g = jPanel1.getGraphics();
        if(curve.degree > 1){
			Tools.evalConvexHull(curve, g, convexHull.isSelected());
		}
		drawPoints();
		g.setColor(curve.colour);
		curve.drawCurve(g);
    }//GEN-LAST:event_convexHullActionPerformed

    private void clearActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_clearActionPerformed
        clearPoints();
    }//GEN-LAST:event_clearActionPerformed

    private void deelevateActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_deelevateActionPerformed
        if(deelevate.isSelected()){
			methodChosen = 1;
		}
		lowerPrompt.dispose();
    }//GEN-LAST:event_deelevateActionPerformed

    private void approxActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_approxActionPerformed
        if(approx.isSelected()){
			methodChosen = 2;
		}
		lowerPrompt.dispose();
    }//GEN-LAST:event_approxActionPerformed

    private void hermiteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_hermiteActionPerformed
        if(hermite.isSelected()){
			methodChosen = 3;
		}
		lowerPrompt.dispose();
    }//GEN-LAST:event_hermiteActionPerformed

    private void methodChangeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_methodChangeActionPerformed
        lowerPrompt.setVisible(true);
    }//GEN-LAST:event_methodChangeActionPerformed

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
        helloPrompt.dispose();
    }//GEN-LAST:event_jButton2ActionPerformed

    private void saveWeightActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_saveWeightActionPerformed
        Graphics g = jPanel1.getGraphics();
		if(convexHull.isSelected()){
			Tools.evalConvexHull(curve, g, false);
		}
		g.setColor(jPanel1.getBackground());
		curve.drawCurve(g);
		for(int i=0; i<curve.degree; i++){
			g.drawOval(curve.points[i].x, curve.points[i].y, 3, 3);
		}
		if("".equals(xCoordinate.getText()) || "".equals(yCoordinate.getText()) || "".equals(weight.getText())){
			JOptionPane.showMessageDialog(null,"Proszę wypełnić wszystkie pola!", "Błąd", JOptionPane.WARNING_MESSAGE);
			return;
		}
		curve.points[pointPosition].x = Integer.valueOf(xCoordinate.getText());
		curve.points[pointPosition].y = Integer.valueOf(yCoordinate.getText());
		curve.weight[pointPosition] = Integer.valueOf(weight.getText());
		changeWeightDialog.dispose();
		
		g.setColor(curve.colour);
		drawPoints();
		curve.drawCurve(g);
		if(convexHull.isSelected()){
			Tools.evalConvexHull(curve, g, true);
		}
    }//GEN-LAST:event_saveWeightActionPerformed

    private void weightActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_weightActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_weightActionPerformed

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JMenuItem About;
    private javax.swing.JMenu Help;
    private javax.swing.JMenuItem Instruction;
    private javax.swing.JMenu Menu;
    private javax.swing.JMenuItem Quit;
    private javax.swing.JDialog aboutDialog;
    private javax.swing.JLabel aboutText;
    private javax.swing.JRadioButton approx;
    private javax.swing.JDialog changeWeightDialog;
    private javax.swing.JButton clear;
    private javax.swing.JButton closeAboutDialog;
    private javax.swing.JButton closeInstrDialog;
    private javax.swing.JButton colorButton;
    private javax.swing.JColorChooser colorChooser;
    private javax.swing.JButton colorChooserButton;
    private javax.swing.JDialog colorChooserDialog;
    private javax.swing.JCheckBox convexHull;
    private javax.swing.JRadioButton deelevate;
    private javax.swing.JCheckBox edition;
    private javax.swing.JDialog helloPrompt;
    private javax.swing.JRadioButton hermite;
    private javax.swing.JButton higherDegree;
    private javax.swing.JDialog instructionDialog;
    private javax.swing.JButton jButton2;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JToolBar jToolBar1;
    private javax.swing.JButton lowerDegree;
    private javax.swing.JDialog lowerPrompt;
    private javax.swing.JMenuBar menuBar;
    private javax.swing.JButton methodChange;
    private javax.swing.ButtonGroup methods;
    private javax.swing.JCheckBox notShow;
    private javax.swing.JButton saveWeight;
    private javax.swing.JTextField weight;
    private javax.swing.JTextField xCoordinate;
    private javax.swing.JTextField yCoordinate;
    // End of variables declaration//GEN-END:variables
}
